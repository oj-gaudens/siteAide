<!DOCTYPE html>
<html lang="fr" data-fr-scheme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Markdown DSFR - Test</title>
    
    <!-- DSFR CSS -->
    <link rel="stylesheet" href="src/assets/dsfr.min.css">
    <link rel="stylesheet" href="src/assets/utility/utility.min.css">
    <link rel="stylesheet" href="src/assets/css/style-dsfr-pur.css">
    
    <!-- Marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        /* CSS supplÃ©mentaire pour test */
        body {
            background-color: var(--background-default-grey);
        }
    </style>
</head>
<body>
    <div class="fr-container" style="margin-top: 2rem;">
        <h1>ğŸ§ª Test Standalone - Studio Markdown DSFR</h1>
        <p>Ce fichier teste le chargement de la JS sans Eleventy.</p>
        
        <!-- Toolbar simple -->
        <div class="dsfr-toolbar">
            <div class="toolbar-header">
                <h3><span class="toolbar-icon">ğŸ”§</span> InsÃ©rer des composants</h3>
            </div>
            
            <div class="toolbar-row">
                <button class="toolbar-btn" data-group="markdown">ğŸ“ MARKDOWN DE BASE â–¼</button>
            </div>
            
            <div class="toolbar-dropdowns">
                <div class="toolbar-dropdown hidden" id="dropdown-markdown">
                    <div class="button-grid">
                        <button data-insert="**texte en gras**">âœ¨ Gras</button>
                        <button data-insert="# Titre">ğŸ“Œ Titre H1</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ã‰diteur -->
        <div class="editor-container">
            <div class="editor-panel">
                <div class="panel-header">ğŸ“ Ã‰diteur Markdown</div>
                <textarea id="markdown-input"># Test

Clique sur le bouton "MARKDOWN DE BASE" puis "Gras" pour tester !

## Si Ã§a marche

Tu verras :
- âœ… Ce texte se met Ã  jour en direct
- âœ… Les boutons rÃ©agissent
- âœ… La preview fonctionne
</textarea>
            </div>
            
            <div class="preview-panel">
                <div class="panel-header">ğŸ‘ï¸ Preview</div>
                <div id="preview"></div>
            </div>
        </div>
        
        <!-- Actions -->
        <div class="action-bar">
            <button id="copy-html" class="fr-btn fr-btn--secondary">ğŸ“‹ Copier HTML</button>
            <button id="copy-text" class="fr-btn fr-btn--secondary">ğŸ“„ Copier texte</button>
            <button id="clear-all" class="fr-btn fr-btn--secondary">ğŸ—‘ï¸ Effacer</button>
        </div>
        
        <div style="margin-top: 2rem; padding: 1rem; background: #fff; border-radius: 4px;">
            <h3>ğŸ” Diagnostic</h3>
            <ul id="diagnostic">
                <li>Chargement...</li>
            </ul>
        </div>
    </div>
    
    <!-- DSFR JavaScript -->
    <script type="module" src="src/assets/dsfr.module.min.js"></script>
    <script nomodule src="src/assets/dsfr.nomodule.min.js"></script>
    
    <!-- Notre script -->
    <script src="src/js/script.js"></script>
    
    <!-- Diagnostic -->
    <script>
        setTimeout(() => {
            const diag = document.getElementById('diagnostic');
            const checks = [];
            
            checks.push(`âœ… window.marked existe : ${typeof marked !== 'undefined'}`);
            checks.push(`âœ… window.dsfr existe : ${typeof window.dsfr !== 'undefined'}`);
            checks.push(`âœ… lancerMarkdownEditor existe : ${typeof lancerMarkdownEditor !== 'undefined'}`);
            checks.push(`âœ… textarea existe : ${document.getElementById('markdown-input') !== null}`);
            checks.push(`âœ… preview existe : ${document.getElementById('preview') !== null}`);
            
            diag.innerHTML = checks.map(c => `<li>${c}</li>`).join('');
        }, 500);
    </script>
</body>
</html>
