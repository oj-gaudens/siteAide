/* =======================================================================
   MARKDOWN EDITOR DSFR - STYLE 100% DSFR
   Utilise UNIQUEMENT les variables et classes DSFR
   Bleu marine officiel : #000091 (comme le drapeau français)
   ======================================================================= */

/* --- VARIABLES CUSTOM MINIMALES --- */
:root {
  --blue-marine: #000091; /* Bleu marine du drapeau français */
  --blue-marine-hover: #1212ff;
  --blue-marine-active: #2323ff;
}

/* --- CONTENEUR CENTRÉ --- */
.fr-container {
  max-width: 1200px !important;
  margin-left: auto !important;
  margin-right: auto !important;
  padding-left: 5rem !important;
  padding-right: 5rem !important;
}

main {
  padding-top: 2rem !important;
  padding-bottom: 2rem !important;
}

/* --- TOOLBAR STYLE GOUVERNEMENTAL --- */
.dsfr-toolbar {
  background: var(--background-action-low-blue-france);
  padding: 1.5rem;
  border-radius: 0.25rem;
  margin-bottom: 2rem;
  border: 2px solid var(--blue-marine);
}

.toolbar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--border-plain-blue-france);
}

.toolbar-header h3 {
  margin: 0;
  color: var(--text-title-blue-france);
  font-size: 1.25rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.toolbar-icon {
  font-size: 1.5rem;
}

.toolbar-actions {
  display: flex;
  gap: 0.75rem;
}

.mini-btn {
  background: white;
  border: 1px solid var(--border-default-grey);
  padding: 0.5rem 1rem;
  border-radius: 0.25rem;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s;
  font-weight: 500;
}

.mini-btn:hover {
  background: var(--background-alt-blue-france);
  border-color: var(--blue-marine);
}

/* --- RANGÉES DE BOUTONS BLEU MARINE --- */
.toolbar-row {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.toolbar-row:last-child {
  margin-bottom: 0;
}

/* --- BOUTONS BLEU MARINE (comme le drapeau) - COMPACTS --- */
.toolbar-btn {
  background: var(--blue-marine) !important;
  color: white !important;
  border: none !important;
  padding: 0.5rem 1rem !important; /* Réduit de 1rem à 0.5rem */
  border-radius: 0.25rem !important;
  font-size: 0.75rem !important; /* Réduit de 0.875rem à 0.75rem */
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: all 0.2s !important;
  white-space: nowrap !important;
  flex: 1 !important;
  min-width: 150px !important; /* Réduit de 200px à 150px */
  text-align: left !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

.toolbar-btn:hover {
  background: var(--blue-marine-hover) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 145, 0.3) !important;
}

.toolbar-btn:active,
.toolbar-btn.active {
  background: var(--blue-marine-active) !important;
  transform: translateY(0) !important;
}

/* --- DROPDOWNS --- */
.toolbar-dropdowns {
  margin-top: 1.5rem;
}

.toolbar-dropdown {
  background: white;
  border: 2px solid var(--blue-marine);
  border-radius: 0.25rem;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 4px 12px rgba(0, 0, 145, 0.1);
}

.toolbar-dropdown.hidden {
  display: none;
}

.toolbar-dropdown:last-child {
  margin-bottom: 0;
}

/* --- GRILLE DE BOUTONS DANS LES DROPDOWNS --- */
.button-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 0.75rem;
}

.button-grid button {
  background: white;
  border: 2px solid var(--border-default-grey);
  padding: 0.875rem 1rem;
  border-radius: 0.25rem;
  cursor: pointer;
  text-align: left;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.2s;
  color: var(--text-default-grey);
}

.button-grid button:hover {
  background: var(--background-alt-blue-france);
  border-color: var(--blue-marine);
  transform: translateX(4px);
  box-shadow: 0 2px 8px rgba(0, 0, 145, 0.15);
}

/* --- ÉDITEUR ET PREVIEW --- */
.editor-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin-bottom: 2rem;
}

.editor-panel,
.preview-panel {
  background: white;
  border: 2px solid var(--border-default-grey);
  border-radius: 0.25rem;
  overflow: hidden;
}

.panel-header {
  background: var(--background-alt-grey);
  padding: 1rem 1.5rem;
  border-bottom: 2px solid var(--border-default-grey);
  font-weight: 700;
  font-size: 1rem;
  color: var(--text-title-grey);
}

#markdown-input {
  width: 100%;
  min-height: 600px;
  padding: 2rem;
  font-family: 'Courier New', Consolas, Monaco, monospace;
  font-size: 14px;
  line-height: 1.8;
  border: none;
  resize: vertical;
  background: white;
  color: var(--text-default-grey);
}

#markdown-input:focus {
  outline: 2px solid var(--blue-marine);
  outline-offset: -2px;
}

#preview {
  min-height: 600px;
  padding: 2rem;
  overflow-y: auto;
}

/* --- BARRE D'ACTIONS BLEU MARINE --- */
.action-bar {
  background: var(--background-action-low-blue-france);
  padding: 1.5rem;
  border-top: 2px solid var(--blue-marine);
  border-radius: 0 0 0.25rem 0.25rem;
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.action-bar .fr-btn {
  min-width: 150px !important;
}

/* Surcharge des boutons DSFR pour le bleu marine */
.action-bar .fr-btn--secondary {
  background-color: var(--blue-marine) !important;
  color: white !important;
}

.action-bar .fr-btn--secondary:hover {
  background-color: var(--blue-marine-hover) !important;
}

/* --- NOTIFICATION --- */
.notification {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  padding: 1rem 1.5rem;
  background: var(--background-action-high-success);
  color: white;
  border-radius: 0.25rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  z-index: 9999;
  animation: slideIn 0.3s ease;
  font-weight: 600;
}

@keyframes slideIn {
  from {
    transform: translateY(100px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* --- THÈME SOMBRE AVEC DSFR --- */
[data-fr-scheme="dark"] .dsfr-toolbar {
  background: var(--background-contrast-grey);
  border-color: var(--border-plain-grey);
}

[data-fr-scheme="dark"] .toolbar-header {
  border-color: var(--border-plain-grey);
}

[data-fr-scheme="dark"] .toolbar-dropdown {
  background: var(--background-contrast-grey);
  border-color: var(--border-plain-grey);
}

[data-fr-scheme="dark"] .editor-panel,
[data-fr-scheme="dark"] .preview-panel {
  background: var(--background-contrast-grey);
  border-color: var(--border-plain-grey);
}

[data-fr-scheme="dark"] #markdown-input {
  background: var(--background-contrast-grey);
  color: var(--text-default-grey);
}

[data-fr-scheme="dark"] .panel-header {
  background: var(--background-alt-grey);
  border-color: var(--border-plain-grey);
}

[data-fr-scheme="dark"] .action-bar {
  background: var(--background-contrast-grey);
  border-color: var(--border-plain-grey);
}

[data-fr-scheme="dark"] .button-grid button {
  background: var(--background-alt-grey);
  border-color: var(--border-plain-grey);
  color: var(--text-default-grey);
}

[data-fr-scheme="dark"] .button-grid button:hover {
  background: var(--background-alt-blue-france);
}

/* --- RESPONSIVE --- */
@media (max-width: 1200px) {
  .fr-container {
    padding-left: 3rem !important;
    padding-right: 3rem !important;
  }
}

@media (max-width: 992px) {
  .editor-container {
    grid-template-columns: 1fr;
  }
  
  .toolbar-row {
    flex-direction: column;
  }
  
  .toolbar-btn {
    width: 100% !important;
    min-width: 0 !important;
  }
}

@media (max-width: 768px) {
  .fr-container {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  
  .toolbar-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }
  
  .toolbar-actions {
    width: 100%;
    flex-direction: column;
  }
  
  .mini-btn {
    width: 100%;
  }
}

/* --- COMPOSANTS DSFR DANS LE PREVIEW --- */
#preview .fr-alert {
  margin-bottom: 1rem;
}

/* --- MODE PLEIN ÉCRAN (comme le screenshot) --- */
body.fullscreen-mode {
  overflow: hidden;
}

body.fullscreen-mode .fr-header,
body.fullscreen-mode .fr-footer {
  display: none !important;
}

body.fullscreen-mode main {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  max-width: 100vw !important;
  padding: 0 !important;
  margin: 0 !important;
  z-index: 9999;
  background: var(--background-default-grey);
}

body.fullscreen-mode .fr-container {
  max-width: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

body.fullscreen-mode .dsfr-toolbar {
  margin: 0;
  border-radius: 0;
  flex-shrink: 0;
  padding: 0.75rem 1rem; /* Plus compact */
}

body.fullscreen-mode .toolbar-header {
  margin-bottom: 0.5rem;
  padding-bottom: 0.5rem;
}

body.fullscreen-mode .toolbar-row {
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

body.fullscreen-mode .editor-container {
  flex: 1;
  margin: 0;
  height: calc(100vh - 200px); /* Ajuster selon la hauteur toolbar */
  overflow: hidden;
}

body.fullscreen-mode .editor-panel,
body.fullscreen-mode .preview-panel {
  height: 100%;
  border-radius: 0;
}

body.fullscreen-mode #markdown-input,
body.fullscreen-mode #preview {
  height: 100%;
  min-height: 100%;
}

body.fullscreen-mode .action-bar {
  flex-shrink: 0;
  border-radius: 0;
  padding: 0.75rem 1rem;
  position: relative;
}

/* Bouton EXIT plein écran */
.exit-fullscreen-btn {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 10000;
  background: var(--blue-marine) !important;
  color: white !important;
  border: none !important;
  padding: 0.75rem 1.5rem !important;
  border-radius: 0.25rem !important;
  font-size: 0.875rem !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: all 0.2s;
  display: none;
}

body.fullscreen-mode .exit-fullscreen-btn {
  display: block;
}

.exit-fullscreen-btn:hover {
  background: var(--blue-marine-hover) !important;
  transform: translateY(-2px);
}

[data-fr-scheme="dark"] body.fullscreen-mode {
  background: var(--background-default-grey);
}

[data-fr-scheme="dark"] body.fullscreen-mode main {
  background: var(--background-default-grey);
}

#preview .fr-callout {
  margin-bottom: 1rem;
}

#preview .fr-badge {
  margin-right: 0.5rem;
  margin-bottom: 0.5rem;
}

#preview .fr-card {
  margin-bottom: 1rem;
}

#preview h1, #preview h2, #preview h3 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

#preview p {
  margin-bottom: 1rem;
}

#preview ul, #preview ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

/* --- TRANSITIONS --- */
* {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

button, .fr-btn {
  transition: all 0.2s ease !important;
}
